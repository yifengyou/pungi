from common/multilib import *
from common/include-excludes import *

# PRODUCT INFO 
release_name = "Rocky Development" 
release_short = "Rocky-devel"
release_version = "8"
version = "8-devel"

skip_phases = ['buildinstall','productimg','createiso','extra_isos','extra_files']

# GENERAL SETTINGS
 comps_file = {
         'scm': 'git',
         'repo': 'https://git.rockylinux.org/rocky/comps.git',
         'branch': 'main',
         'file': 'comps-rocky-8.7.xml',
 }

#link_type = 'hardlink-or-copy'
link_type = 'copy'

module_defaults_dir = {
        'scm': 'git',
        'repo': 'https://git.rockylinux.org/rocky/rocky-module-defaults.git',
        'branch': 'r8.7',
        'dir': '.',
}

multilib = [
    ('^.*$', {
        'x86_64': ['devel', 'runtime']
    }),
]

variants_file = 'variants-devel.xml'
sigkeys = ['6D745A60']
hashed_directories = True

# tree_arches = ['aarch64', 'i386', 'ppc64le', 'x86_64']
tree_arches = ['aarch64', 'i386', 'x86_64']

# PKGSET
pkgset_source = "koji"
koji_profile = "koji"

# PKGSET - KOJI
pkgset_koji_tag = "dist-rocky8-compose"
pkgset_koji_inherit = False
pkgset_koji_module_tag = "modular-updates-candidate"

filter_system_release_packages = False

# GATHER
gather_prepopulate = "rocky-packages.json"

gather_method = {
        "^(?!(AppStream|PowerTools)).*$":{
                "comps": "deps"
        },
        "^(AppStream|PowerTools)$": "hybrid",
}

gather_backend = "dnf"
check_deps = False
greedy_method = "none"
repoclosure_backend = "dnf"

# CREATEREPO
createrepo_deltas = False
createrepo_database = True
createrepo_c = True
createrepo_checksum = "sha256"
createrepo_use_xz = True
createrepo_num_threads = 8
createrepo_num_workers = 4

# CHECKSUMS
media_checksums = ['sha256']
media_checksum_one_file = True
create_jigdo = False


buildinstall_skip = [
    ("^(devel|AppStream|PowerTools|HighAvailability|ResilientStorage)$", {
       "*": True
       }),
]

# LOOKASIDE
variant_as_lookaside = [
]

gather_lookaside_repos = [
    ("^devel$", {
        "x86_64": [
            "file:///mnt/compose/8/latest-Rocky-8/compose/BaseOS/x86_64/os",
            "file:///mnt/compose/8/latest-Rocky-8/compose/BaseOS/x86_64/debug/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/BaseOS/source/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/AppStream/x86_64/os",
            "file:///mnt/compose/8/latest-Rocky-8/compose/AppStream/x86_64/debug/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/AppStream/source/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/PowerTools/x86_64/os",
            "file:///mnt/compose/8/latest-Rocky-8/compose/PowerTools/x86_64/debug/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/PowerTools/source/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/HighAvailability/x86_64/os",
            "file:///mnt/compose/8/latest-Rocky-8/compose/HighAvailability/x86_64/debug/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/HighAvailability/source/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/ResilientStorage/x86_64/os",
            "file:///mnt/compose/8/latest-Rocky-8/compose/ResilientStorage/x86_64/debug/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/ResilientStorage/source/tree",
        ],
        "ppc64": [
        ],
        "ppc64le": [
            "file:///mnt/compose/8/latest-Rocky-8/compose/BaseOS/ppc64le/os",
            "file:///mnt/compose/8/latest-Rocky-8/compose/BaseOS/ppc64le/debug/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/BaseOS/source/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/AppStream/ppc64le/os",
            "file:///mnt/compose/8/latest-Rocky-8/compose/AppStream/ppc64le/debug/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/AppStream/source/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/PowerTools/ppc64le/os",
            "file:///mnt/compose/8/latest-Rocky-8/compose/PowerTools/ppc64le/debug/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/PowerTools/source/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/HighAvailability/ppc64le/os",
            "file:///mnt/compose/8/latest-Rocky-8/compose/HighAvailability/ppc64le/debug/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/HighAvailability/source/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/ResilientStorage/ppc64le/os",
            "file:///mnt/compose/8/latest-Rocky-8/compose/ResilientStorage/ppc64le/debug/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/ResilientStorage/source/tree",
        ],
        "s390x": [
        ],
        "aarch64": [
            "file:///mnt/compose/8/latest-Rocky-8/compose/BaseOS/aarch64/os",
            "file:///mnt/compose/8/latest-Rocky-8/compose/BaseOS/aarch64/debug/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/BaseOS/source/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/AppStream/aarch64/os",
            "file:///mnt/compose/8/latest-Rocky-8/compose/AppStream/aarch64/debug/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/AppStream/source/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/PowerTools/aarch64/os",
            "file:///mnt/compose/8/latest-Rocky-8/compose/PowerTools/aarch64/debug/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/PowerTools/source/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/HighAvailability/aarch64/os",
            "file:///mnt/compose/8/latest-Rocky-8/compose/HighAvailability/aarch64/debug/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/HighAvailability/source/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/ResilientStorage/aarch64/os",
            "file:///mnt/compose/8/latest-Rocky-8/compose/ResilientStorage/aarch64/debug/tree",
            "file:///mnt/compose/8/latest-Rocky-8/compose/ResilientStorage/source/tree",
        ],
    }),
]

productimg = False

translate_paths = [
	("/mnt/koji", "https://koji.rockylinux.org/kojifiles")
	# ("/compose", "http://172.22.0.123/compose"),
]

